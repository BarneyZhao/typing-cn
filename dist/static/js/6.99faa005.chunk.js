(this["webpackJsonptyping-cn"]=this["webpackJsonptyping-cn"]||[]).push([[6],{299:function(e,t,r){},335:function(e,t,r){"use strict";r.r(t);var n=r(24),a=r(334),c=r(48),o=r(340),u=r(339),l=r(279),s=r(280),i=r(49),m=r(336),f=r(278),d=r(281),p=r(341),b=r(342),h=r(343),E=r(0),j=r.n(E),v=(r(299),r(84)),O=r(122),w=o.a.Countdown,g=u.a.Panel,N=function(e,t){return"1"!==e&&t&&0!==t.length?t:O.a},C=function(e){var t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r<10?"0":"").concat(r)};t.default=Object(v.b)((function(e){var t=Object(E.useState)(!0),r=Object(c.a)(t,2),o=r[0],v=r[1],O=Object(E.useState)(0),y=Object(c.a)(O,2),x=y[0],R=y[1],k=Object(E.useState)(0),S=Object(c.a)(k,2),T=S[0],W=S[1],$=Object(E.useState)([]),A=Object(c.a)($,2),M=A[0],J=A[1],P=Object(E.useState)(""),V=Object(c.a)(P,2),D=V[0],F=V[1],H=Object(E.useState)(!1),I=Object(c.a)(H,2),K=I[0],U=I[1],q=Object(E.useRef)(N(e.$state.root.wordsMode,e.$state.root.customerWords)),z=Object(E.useRef)(null),B=Object(E.useRef)(null),G=Object(E.useRef)(0),L=Object(E.useRef)(!1),Q=Object(E.useRef)(0),X=Object(E.useRef)(0),Y=Object(E.useRef)(!1),Z=Object(E.useRef)(53),_=Object(E.useRef)(0),ee=Object(E.useRef)(parseInt(e.$state.root.countdownTime,10)),te=Object(E.useState)(C(ee.current)),re=Object(c.a)(te,2),ne=re[0],ae=re[1],ce=Object(E.useState)(!1),oe=Object(c.a)(ce,2),ue=oe[0],le=oe[1],se=Object(E.useRef)({wpm:0,correct:0,wrong:0,inputWordArr:[]}),ie=function(e){J((function(t){var r=Object(a.a)(q.current);return e?(G.current=0,[Object(n.a)({isCorrect:null},r[G.current])]):(G.current+=1,G.current>=r.length&&(G.current=0),t.concat(Object(n.a)({isCorrect:null},r[G.current])))}))},me=function(e,t){var r=!0;return e.forEach((function(e,n){t.charAt(n)!==e&&(r=!1)})),r},fe=Object(E.useCallback)((function(){L.current=!1,X.current=0,Y.current=!1,_.current=0,U(!1),F(""),W(0),q.current=function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}(q.current),ie(!0),setTimeout((function(){B.current.focus(),se.current={wpm:0,correct:0,wrong:0,inputWordArr:[]}}),10)}),[]);return Object(E.useEffect)((function(){if(z){var e=z.current.lastElementChild;if(!e||!e.lastElementChild)return;var t=z.current.scrollTop;Array.from(e.children).forEach((function(r,n){Z.current=r.offsetHeight;var a=r.offsetTop-e.offsetTop,c=Z.current+t,o=c-5<a&&a<c+5;!L.current&&o&&(Q.current=n,L.current=!0)})),e.lastElementChild.offsetTop-e.offsetTop-t<3*Z.current+1&&ie()}}),[M.length]),Object(E.useEffect)((function(){if(!K)if(""!==D){Y.current||function(){var e=ee.current;R(Date.now()+1e3*e)}(),Y.current=!0;var e=Array.from(D.trim());if(" "===D[D.length-1]){if(F(""),0===e.length)return;J((function(t){var r=Object(a.a)(t),n=r[T],c=me(e,n.text);return r[T].isCorrect=c&&e.length===n.text.length,se.current.inputWordArr.push(Object.assign({input:e.join("")},r[T])),r})),W(T+1),T+1===Q.current&&(X.current+=1,z.current.scrollTop=Z.current*X.current,L.current=!1,ie())}else J((function(t){var r=Object(a.a)(t),n=r[T],c=me(e,n.text);return r[T].isCorrect=!1!==c&&null,r}))}else J((function(e){var t=Object(a.a)(e);return t[T]&&(t[T].isCorrect=null),t}))}),[T,K,D]),Object(E.useEffect)((function(){q.current=N(e.$state.root.wordsMode,e.$state.root.customerWords),setTimeout((function(){fe(),v(!1)}),1e3)}),[e.$state.root.wordsMode,e.$state.root.customerWords,fe]),j.a.createElement("div",{className:"home"},j.a.createElement(l.a,{justify:"center",align:"middle"},j.a.createElement(s.a,{flex:"450px",className:"home-scale-box-".concat(e.$state.root.uiScale)},j.a.createElement("div",{className:"hide-control"},j.a.createElement(i.a,{type:"link",onClick:function(){return le((function(e){return!e}))}},ue?"\u663e\u793a":"\u9690\u85cf","\u62fc\u97f3")),j.a.createElement("div",{className:"home-show-main"},K&&j.a.createElement("div",{className:"type-end"}),j.a.createElement(m.a,{spinning:o,delay:50,wrapperClassName:"loading-wrapper"},j.a.createElement("div",{className:"home-show-main-window",ref:z},j.a.createElement(l.a,{gutter:12},M.map((function(e,t){return j.a.createElement(s.a,{key:t,className:"home-show-main-window-item ".concat(!0===e.isCorrect?"correct":""," ").concat(!1===e.isCorrect?"incorrect":"")},j.a.createElement("div",{className:"home-show-main-window--label ".concat(T===t?"acting":"")},e.label),j.a.createElement("div",{className:"home-show-main-window--text ".concat(ue?"hide":"")},e.text))})))))),j.a.createElement(l.a,{justify:"space-between",align:"middle",gutter:0},j.a.createElement(s.a,{flex:"285px"},j.a.createElement(f.a,{className:"home-input",ref:B,value:D,onChange:function(e){F(e.target.value)},onKeyUp:function(e){13===e.keyCode&&fe(),K||(_.current+=1)}})),j.a.createElement(s.a,{flex:"90px"},j.a.createElement(d.a,{content:j.a.createElement("div",null,j.a.createElement(p.a,{defaultValue:ee.current,onChange:function(e){e&&/^\d+$/g.test(String(e))&&(ee.current=Number(e),ae(C(Number(e))))}}),j.a.createElement("span",null,"\u79d2")),onVisibleChange:function(){return e.$dispatch("setCountdownTime",String(ee.current))},overlayClassName:"home-countdown-popover",placement:"bottom",title:"",trigger:"click"},j.a.createElement("div",{className:"home-countdown"},j.a.createElement(w,{className:"home-countdown-main",value:x,format:"m:ss",onFinish:function(){if(Y.current){var e=se.current.inputWordArr;se.current={wpm:Math.round(e.length/(ee.current/60)),correct:e.filter((function(e){return!0===e.isCorrect})).length,wrong:e.filter((function(e){return!1===e.isCorrect})).length,inputWordArr:e},U(!0),console.log(M)}}}),j.a.createElement("div",{className:"home-countdown-placeholder ".concat(Y.current?"time-run":"")},ne)))),j.a.createElement(s.a,{flex:"50px"},j.a.createElement(i.a,{className:"home-reload-btn",onClick:fe,type:"primary",icon:j.a.createElement(h.a,null)}))),j.a.createElement("div",{className:"home-type-result-container"},K&&j.a.createElement(l.a,{className:"home-type-result"},j.a.createElement(s.a,{span:24},j.a.createElement("div",{className:"result-wpm"},se.current.wpm,"WPM")),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-title"},"\u6b63\u786e")),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-numbers correct"},se.current.correct)),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-title"},"\u9519\u8bef")),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-numbers wrong"},se.current.wrong)),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-title"},"\u6309\u952e\u603b\u6570")),j.a.createElement(s.a,{span:12},j.a.createElement("div",{className:"result-numbers"},_.current)),j.a.createElement(s.a,{span:24},j.a.createElement(u.a,{ghost:!0,className:"type-resule-collapse"},j.a.createElement(g,{header:"\u5c55\u5f00\u6b64\u6b21\u8f93\u5165",key:"1"},se.current.inputWordArr.map((function(e,t){return j.a.createElement(b.a,{color:e.isCorrect?"success":"error",key:t},j.a.createElement("div",null,e.label),j.a.createElement("div",null,e.input))}))))))))))}))}}]);
//# sourceMappingURL=6.99faa005.chunk.js.map