{"version":3,"sources":["views/home/Home.tsx"],"names":["Countdown","Statistic","Panel","Collapse","getWords","mode","propWords","length","WORDS","getCountdownStr","value","minutes","Math","floor","secs","storeConnect","props","useState","loading","setLoading","deadline","setDeadline","actingWordIndex","setActingWordIndex","wordArr","setWordArr","wordInput","setWordInput","typingEnd","setTypingEnd","wordsBaseRef","useRef","$state","root","wordsMode","customerWords","mainWindowEl","mainInputEl","wordIndexRef","lineIndexLockRef","nextLineStartIndexRef","lineCountRef","timeStartRef","oneLineHeightRef","keystrokeCountRef","countdownTimeRef","parseInt","countdownTime","current","deadlineText","setDeadlineText","isHideCharacter","setIsHideCharacter","typingResultRef","wpm","correct","wrong","inputWordArr","pushWordToArr","isInit","arr","wordsTemp","isCorrect","concat","checkInputVal","inputArr","target","forEach","char","index","charAt","reloadBtn","useCallback","i","rIndex","random","temp","shuffle","setTimeout","focus","useEffect","wordContainerRow","lastElementChild","outterScrollTop","scrollTop","Array","from","children","child","offsetHeight","childTopToParent","offsetTop","showsSecLine","isNextLineCheck","time","Date","now","countDownStart","trim","tempArr","targetWord","text","push","Object","assign","input","join","className","justify","align","flex","uiScale","type","onClick","v","spinning","delay","wrapperClassName","ref","gutter","map","item","key","label","onChange","evt","onKeyUp","keyCode","content","defaultValue","test","String","Number","onVisibleChange","$dispatch","overlayClassName","placement","title","trigger","format","onFinish","round","filter","word","console","log","icon","span","ghost","header","w","wi","color"],"mappings":"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","file":"static/js/6.99faa005.chunk.js","sourcesContent":["import {\n    Input,\n    Row,\n    Col,\n    Statistic,\n    Button,\n    Spin,\n    Popover,\n    InputNumber,\n    Collapse,\n    Tag,\n} from 'antd';\nimport { ReloadOutlined } from '@ant-design/icons';\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\n\nimport './Home.less';\nimport { storeConnect, MapState, MapDispatch } from '@/store/index';\nimport WORDS, { Word } from '@/words';\n\nconst { Countdown } = Statistic;\nconst { Panel } = Collapse;\n\nconst shuffle = (arr: any[]) => {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        let rIndex = Math.floor(Math.random() * (i + 1));\n        let temp = arr[rIndex];\n        arr[rIndex] = arr[i];\n        arr[i] = temp;\n    }\n    return arr;\n};\nconst getWords = (mode: string, propWords: Word[]) => {\n    if (mode !== '1' && propWords && propWords.length !== 0) {\n        return propWords;\n    } else {\n        return WORDS;\n    }\n};\nconst getCountdownStr = (value: number) => {\n    const minutes = Math.floor(value / 60);\n    const secs = value % 60;\n    return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;\n};\n\nconst Home: React.FC<MapState & MapDispatch> = (props) => {\n    const [loading, setLoading] = useState(true);\n    const [deadline, setDeadline] = useState(0);\n    const [actingWordIndex, setActingWordIndex] = useState(0);\n    const [wordArr, setWordArr] = useState<Array<Word & { isCorrect: boolean | null }>>([]);\n    const [wordInput, setWordInput] = useState('');\n    const [typingEnd, setTypingEnd] = useState(false);\n    const wordsBaseRef = useRef(\n        getWords(props.$state.root.wordsMode, props.$state.root.customerWords)\n    );\n    const mainWindowEl = useRef(null);\n    const mainInputEl = useRef(null);\n    const wordIndexRef = useRef(0); // WORDS数组的下标\n    const lineIndexLockRef = useRef(false); // 是否设置过第二行开头元素的下标\n    const nextLineStartIndexRef = useRef(0);\n    const lineCountRef = useRef(0);\n    const timeStartRef = useRef(false);\n    const oneLineHeightRef = useRef(53);\n    const keystrokeCountRef = useRef(0);\n    const countdownTimeRef = useRef(parseInt(props.$state.root.countdownTime, 10));\n    const [deadlineText, setDeadlineText] = useState(getCountdownStr(countdownTimeRef.current));\n    const [isHideCharacter, setIsHideCharacter] = useState(false);\n    const typingResultRef = useRef({\n        wpm: 0,\n        correct: 0,\n        wrong: 0,\n        inputWordArr: [] as any[],\n    });\n\n    const countDownStart = () => {\n        const time = countdownTimeRef.current;\n        setDeadline(Date.now() + time * 1000);\n    };\n    const pushWordToArr = (isInit?: boolean) => {\n        setWordArr((arr) => {\n            const wordsTemp = [...wordsBaseRef.current];\n            if (isInit) {\n                wordIndexRef.current = 0;\n                return [{ isCorrect: null, ...wordsTemp[wordIndexRef.current] }];\n            } else {\n                wordIndexRef.current += 1;\n                if (wordIndexRef.current >= wordsTemp.length) wordIndexRef.current = 0;\n                return arr.concat({ isCorrect: null, ...wordsTemp[wordIndexRef.current] });\n            }\n        });\n    };\n    const checkInputVal = (inputArr: string[], target: string) => {\n        let isCorrect = true;\n        inputArr.forEach((char, index) => {\n            if (target.charAt(index) !== char) {\n                isCorrect = false;\n            }\n        });\n        return isCorrect;\n    };\n    const inputCountdownTime = (value?: number | string) => {\n        if (value && /^\\d+$/g.test(String(value))) {\n            countdownTimeRef.current = Number(value);\n            setDeadlineText(getCountdownStr(Number(value)));\n        }\n    };\n    const onCountdownFinish = () => {\n        if (timeStartRef.current) {\n            const inputWordArr = typingResultRef.current.inputWordArr;\n            typingResultRef.current = {\n                wpm: Math.round(inputWordArr.length / (countdownTimeRef.current / 60)),\n                correct: inputWordArr.filter((word: any) => word.isCorrect === true).length,\n                wrong: inputWordArr.filter((word: any) => word.isCorrect === false).length,\n                inputWordArr,\n            };\n            setTypingEnd(true);\n            console.log(wordArr);\n        }\n    };\n    const reloadBtn = useCallback(() => {\n        lineIndexLockRef.current = false;\n        lineCountRef.current = 0;\n        timeStartRef.current = false;\n        keystrokeCountRef.current = 0;\n        setTypingEnd(false);\n        setWordInput('');\n        setActingWordIndex(0);\n        wordsBaseRef.current = shuffle(wordsBaseRef.current);\n        pushWordToArr(true);\n        setTimeout(() => {\n            (mainInputEl.current as any).focus();\n            typingResultRef.current = {\n                wpm: 0,\n                correct: 0,\n                wrong: 0,\n                inputWordArr: [] as any[],\n            };\n        }, 10);\n    }, []);\n    const mainInputKeyUp = (evt: React.KeyboardEvent) => {\n        if (evt.keyCode === 13) reloadBtn();\n        if (typingEnd) return;\n        keystrokeCountRef.current += 1;\n    };\n\n    useEffect(() => {\n        if (mainWindowEl) {\n            const wordContainerRow = (mainWindowEl.current as any).lastElementChild;\n            if (!wordContainerRow || !wordContainerRow.lastElementChild) return;\n            const outterScrollTop = (mainWindowEl.current as any).scrollTop;\n            Array.from(wordContainerRow.children).forEach((child: any, index: number) => {\n                oneLineHeightRef.current = child.offsetHeight;\n                const childTopToParent = child.offsetTop - wordContainerRow.offsetTop;\n                const showsSecLine = oneLineHeightRef.current + outterScrollTop;\n                const isNextLineCheck = // 判断是不是显示的两行中的第二行，存在小数公差\n                    showsSecLine - 5 < childTopToParent && childTopToParent < showsSecLine + 5;\n                if (!lineIndexLockRef.current && isNextLineCheck) {\n                    nextLineStartIndexRef.current = index;\n                    lineIndexLockRef.current = true;\n                }\n            });\n            if (\n                wordContainerRow.lastElementChild.offsetTop -\n                    wordContainerRow.offsetTop -\n                    outterScrollTop <\n                oneLineHeightRef.current * 3 + 1\n            ) {\n                pushWordToArr();\n            }\n        }\n    }, [wordArr.length]);\n\n    useEffect(() => {\n        if (typingEnd) return;\n        if (wordInput === '') {\n            setWordArr((arr) => {\n                const tempArr = [...arr];\n                if (tempArr[actingWordIndex]) {\n                    tempArr[actingWordIndex].isCorrect = null;\n                }\n                return tempArr;\n            });\n            return;\n        }\n        if (!timeStartRef.current) countDownStart();\n        timeStartRef.current = true;\n        const inputArr = Array.from(wordInput.trim());\n        if (wordInput[wordInput.length - 1] === ' ') {\n            setWordInput('');\n            if (inputArr.length === 0) return;\n            setWordArr((arr) => {\n                let tempArr = [...arr];\n                const targetWord = tempArr[actingWordIndex];\n                const isCorrect = checkInputVal(inputArr, targetWord.text);\n                tempArr[actingWordIndex].isCorrect =\n                    isCorrect && inputArr.length === targetWord.text.length;\n\n                typingResultRef.current.inputWordArr.push(\n                    Object.assign({ input: inputArr.join('') }, tempArr[actingWordIndex])\n                );\n                return tempArr;\n            });\n            setActingWordIndex(actingWordIndex + 1);\n            if (actingWordIndex + 1 === nextLineStartIndexRef.current) {\n                lineCountRef.current += 1;\n                (mainWindowEl.current as any).scrollTop =\n                    oneLineHeightRef.current * lineCountRef.current;\n                lineIndexLockRef.current = false;\n                pushWordToArr();\n            }\n        } else {\n            setWordArr((arr) => {\n                const tempArr = [...arr];\n                const targetWord = tempArr[actingWordIndex];\n                const isCorrect = checkInputVal(inputArr, targetWord.text);\n                tempArr[actingWordIndex].isCorrect = isCorrect === false ? false : null;\n                return tempArr;\n            });\n        }\n    }, [actingWordIndex, typingEnd, wordInput]);\n\n    useEffect(() => {\n        wordsBaseRef.current = getWords(\n            props.$state.root.wordsMode,\n            props.$state.root.customerWords\n        );\n        setTimeout(() => {\n            reloadBtn();\n            setLoading(false);\n        }, 1000);\n    }, [props.$state.root.wordsMode, props.$state.root.customerWords, reloadBtn]);\n\n    return (\n        <div className=\"home\">\n            <Row justify=\"center\" align=\"middle\">\n                <Col flex=\"450px\" className={`home-scale-box-${props.$state.root.uiScale}`}>\n                    <div className=\"hide-control\">\n                        <Button type=\"link\" onClick={() => setIsHideCharacter((v) => !v)}>\n                            {isHideCharacter ? '显示' : '隐藏'}拼音\n                        </Button>\n                    </div>\n                    <div className=\"home-show-main\">\n                        {typingEnd && <div className=\"type-end\"></div>}\n                        <Spin spinning={loading} delay={50} wrapperClassName=\"loading-wrapper\">\n                            <div className=\"home-show-main-window\" ref={mainWindowEl}>\n                                <Row gutter={12}>\n                                    {wordArr.map((item, index) => (\n                                        <Col\n                                            key={index}\n                                            className={`home-show-main-window-item ${\n                                                item.isCorrect === true ? 'correct' : ''\n                                            } ${item.isCorrect === false ? 'incorrect' : ''}`}\n                                        >\n                                            <div\n                                                className={`home-show-main-window--label ${\n                                                    actingWordIndex === index ? 'acting' : ''\n                                                }`}\n                                            >\n                                                {item.label}\n                                            </div>\n                                            <div\n                                                className={`home-show-main-window--text ${\n                                                    isHideCharacter ? 'hide' : ''\n                                                }`}\n                                            >\n                                                {item.text}\n                                            </div>\n                                        </Col>\n                                    ))}\n                                </Row>\n                            </div>\n                        </Spin>\n                    </div>\n                    <Row justify=\"space-between\" align=\"middle\" gutter={0}>\n                        <Col flex=\"285px\">\n                            <Input\n                                className=\"home-input\"\n                                ref={mainInputEl}\n                                value={wordInput}\n                                onChange={(evt) => {\n                                    setWordInput(evt.target.value);\n                                }}\n                                onKeyUp={mainInputKeyUp}\n                            ></Input>\n                        </Col>\n                        <Col flex=\"90px\">\n                            <Popover\n                                content={\n                                    <div>\n                                        <InputNumber\n                                            defaultValue={countdownTimeRef.current}\n                                            onChange={inputCountdownTime}\n                                        ></InputNumber>\n                                        <span>秒</span>\n                                    </div>\n                                }\n                                onVisibleChange={() =>\n                                    props.$dispatch(\n                                        'setCountdownTime',\n                                        String(countdownTimeRef.current)\n                                    )\n                                }\n                                overlayClassName=\"home-countdown-popover\"\n                                placement=\"bottom\"\n                                title=\"\"\n                                trigger=\"click\"\n                            >\n                                <div className=\"home-countdown\">\n                                    <Countdown\n                                        className=\"home-countdown-main\"\n                                        value={deadline}\n                                        format=\"m:ss\"\n                                        onFinish={onCountdownFinish}\n                                    ></Countdown>\n                                    <div\n                                        className={`home-countdown-placeholder ${\n                                            timeStartRef.current ? 'time-run' : ''\n                                        }`}\n                                    >\n                                        {deadlineText}\n                                    </div>\n                                </div>\n                            </Popover>\n                        </Col>\n                        <Col flex=\"50px\">\n                            <Button\n                                className=\"home-reload-btn\"\n                                onClick={reloadBtn}\n                                type=\"primary\"\n                                icon={<ReloadOutlined />}\n                            />\n                        </Col>\n                    </Row>\n                    <div className=\"home-type-result-container\">\n                        {typingEnd && (\n                            <Row className=\"home-type-result\">\n                                <Col span={24}>\n                                    <div className=\"result-wpm\">\n                                        {typingResultRef.current.wpm}\n                                        WPM\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">正确</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers correct\">\n                                        {typingResultRef.current.correct}\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">错误</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers wrong\">\n                                        {typingResultRef.current.wrong}\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">按键总数</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers\">\n                                        {keystrokeCountRef.current}\n                                    </div>\n                                </Col>\n                                <Col span={24}>\n                                    <Collapse ghost={true} className=\"type-resule-collapse\">\n                                        <Panel header=\"展开此次输入\" key=\"1\">\n                                            {typingResultRef.current.inputWordArr.map((w, wi) => (\n                                                <Tag\n                                                    color={w.isCorrect ? 'success' : 'error'}\n                                                    key={wi}\n                                                >\n                                                    <div>{w.label}</div>\n                                                    <div>{w.input}</div>\n                                                </Tag>\n                                            ))}\n                                        </Panel>\n                                    </Collapse>\n                                </Col>\n                            </Row>\n                        )}\n                    </div>\n                </Col>\n            </Row>\n        </div>\n    );\n};\n\nexport default storeConnect(Home);\n"],"sourceRoot":""}