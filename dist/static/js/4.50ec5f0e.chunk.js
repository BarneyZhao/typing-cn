(this["webpackJsonptyping-cn"]=this["webpackJsonptyping-cn"]||[]).push([[4],{289:function(e,t,r){"use strict";var n=r(122),a={shuffle:function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e},getWords:function(e,t){return"1"!==e&&t&&0!==t.length?a.jsonCopy(t):a.jsonCopy(n.a)},jsonCopy:function(e){return JSON.parse(JSON.stringify(e))}};t.a=a},332:function(e,t,r){},338:function(e,t,r){"use strict";var n=r(0),a={name:"reload",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]}},c=r(26),l=function(e,t){return n.createElement(c.a,Object.assign({},e,{ref:t,icon:a}))};l.displayName="ReloadOutlined";t.a=n.forwardRef(l)},341:function(e,t,r){"use strict";r.r(t);var n=r(47),a=r(0),c=r.n(a),l=r(277),s=r(279),o=r(280),i=r(49),u=r(338),m=(r(332),r(83)),f=r(289);t.default=Object(m.b)((function(e){var t=Object(a.useRef)(null),r=Object(a.useRef)(null),m=Object(a.useRef)(null),d=Object(a.useRef)(f.a.getWords(e.$state.root.wordsMode,e.$state.root.customerWords)),g=Object(a.useRef)([0,0]),h=Object(a.useRef)({wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}}),p=Object(a.useState)(!1),b=Object(n.a)(p,2),v=b[0],C=b[1],y=Object(a.useState)(!1),E=Object(n.a)(y,2),j=E[0],O=E[1],N=Object(a.useState)(!1),w=Object(n.a)(N,2),A=w[0],k=w[1],x=Object(a.useState)(!1),B=Object(n.a)(x,2),S=B[0],R=B[1],M=Object(a.useState)(""),D=Object(n.a)(M,2),J=D[0],W=D[1],T=Object(a.useState)([]),z=Object(n.a)(T,2),F=z[0],P=z[1],$=Object(a.useState)({top:0,left:0}),G=Object(n.a)($,2),I=G[0],K=G[1],_=Object(a.useState)(30),q=Object(n.a)(_,2),H=q[0],L=q[1],Q=function(){var e=g.current,t=r.current.getBoundingClientRect(),n=Array.from(r.current.children)[e[0]],a=Array.from(n.getElementsByClassName("letter"));if(a.length<=e[1]){var c=a[e[1]-1].getBoundingClientRect();K({top:c.top-t.top+2,left:c.left-t.left+c.width})}else{var l=a[e[1]].getBoundingClientRect();K({top:l.top-t.top+2,left:l.left-t.left})}},U=Object(a.useCallback)((function(e,t){var n,a=g.current;if(32===e)n=""===J||" "===J.charAt(J.length-1)?a:[a[0]+1,0];else{if(a[1]>=F[a[0]].letterArr.length){var c=Array.from(r.current.children)[a[0]],l=document.createElement("code");l.className="letter wrong extra-letter",l.innerText=t,c.appendChild(l)}n=[a[0],a[1]+1]}g.current=n,Q(),P((function(n){var c=n[a[0]].letterArr[a[1]];if(c&&32!==e&&(c.isCorrect=t===c.letter,n[a[0]].letterArr[a[1]]=c),32===e)if(n[a[0]].letterArr.some((function(e){return null===e.isCorrect})))n[a[0]].isSkip=!0,n[a[0]].isCorrect=!1;else{var l=Array.from(r.current.children)[a[0]].getElementsByClassName("extra-letter");l&&0!==l.length?n[a[0]].isCorrect=!1:n[a[0]].isCorrect=n[a[0]].letterArr.every((function(e){return e.isCorrect}))}if(a[0]===n.length-1&&a[1]===n[a[0]].letterArr.length-1){var s=Array.from(r.current.children)[a[0]].getElementsByClassName("extra-letter");s&&0!==s.length||(n[a[0]].isCorrect=n[a[0]].letterArr.every((function(e){return e.isCorrect})),n[a[0]].isCorrect&&(h.current.right=n.filter((function(e){return e.isCorrect})).length,h.current.wrong=n.length-h.current.right,h.current.acc=Math.round(h.current.right/(h.current.right+h.current.wrong)*100),h.current.time.secs=Math.round((Date.now()-h.current.time.begin)/1e3),h.current.wpm=(h.current.right/(h.current.time.secs/60)).toFixed(2),C(!1),k(!0),setTimeout((function(){R(!0)}),150)))}return n})),W((function(r){return 32!==e||""!==r&&" "!==r.charAt(r.length-1)?r+t:r}))}),[J,F]),V=Object(a.useCallback)((function(){var e=J.charAt(J.length-1);if(""!==e){var t,n=g.current;if(" "===e)if(F[n[0]-1].isCorrect)t=n;else if(F[n[0]-1].isSkip){var a=F[n[0]-1].letterArr.findIndex((function(e){return null===e.isCorrect}));t=[n[0]-1,a]}else{var c=Array.from(r.current.children)[n[0]-1].getElementsByClassName("letter");t=[n[0]-1,c.length]}else{var l=Array.from(r.current.children)[n[0]],s=l.getElementsByClassName("extra-letter");s&&s.length>0&&l.removeChild(s[s.length-1]),t=[n[0],n[1]-1]}g.current=t,Q(),P((function(t){return" "===e?!1===t[n[0]-1].isCorrect&&(t[n[0]-1].isCorrect=null):t[n[0]].letterArr.length>=n[1]&&(t[n[0]].letterArr[n[1]-1].isCorrect=null,t[n[0]].isCorrect=null),t})),W((function(t){var r=!0;return" "===e&&F[n[0]-1].isCorrect&&(r=!1),r?t.substring(0,t.length-1):t}))}}),[J,F]),X=function(){C(!0),t.current.focus()},Y=Object(a.useCallback)((function(){g.current=[0,0],d.current=f.a.shuffle(d.current),h.current={wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}},P(f.a.jsonCopy(d.current.slice(0,H)).map((function(e){return Object.assign({},e,{letterArr:Array.from(e.text).map((function(e){return{letter:e,isCorrect:null}})),isCorrect:null,isSkip:!1})}))),W(""),k(!1),R(!1),setTimeout((function(){X(),Q()}),10)}),[H]);return Object(a.useEffect)((function(){Y()}),[Y,H]),c.a.createElement("div",{className:"Monkey"},c.a.createElement("div",{className:"word-count-radio"},c.a.createElement(l.a.Group,{value:H,size:"small",onChange:function(e){L(e.target.value)}},c.a.createElement(l.a.Button,{value:20},"20"),c.a.createElement(l.a.Button,{value:30},"30"),c.a.createElement(l.a.Button,{value:40},"40"),c.a.createElement(l.a.Button,{value:50},"50"))),c.a.createElement(s.a,{justify:"center",align:"middle"},c.a.createElement(o.a,{flex:"900px",className:"type-main-box ".concat(A?"fading":""," ").concat(S?"hide":"")},c.a.createElement("div",{className:"caret ".concat(v?j?"flash":"":"hide"),ref:m,style:{transform:"translate3d(".concat(I.left,"px,").concat(I.top,"px,0)")}}),c.a.createElement("div",{className:"words-box",onClick:X,ref:r},F.map((function(e,t){var r;return c.a.createElement("div",{className:"word ".concat(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),key:t},c.a.createElement("div",{className:"label"},e.label),null===(r=e.letterArr)||void 0===r?void 0:r.map((function(e,r){return c.a.createElement("code",{className:"letter ".concat(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),key:"".concat(t,"_").concat(r)},e.letter)})))}))),c.a.createElement("input",{className:"hidden-input",type:"text",ref:t,onKeyDown:function(e){9!==e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.persist()),S||(O(!1),1===e.key.length?(0===h.current.time.begin&&(h.current.time.begin=Date.now()),U(e.keyCode,e.key)):8===e.keyCode&&V())},onBlur:function(){C(!1),O(!1)},onFocus:function(){C(!0),O(!0)}}),c.a.createElement("div",{className:"reload-line"},c.a.createElement(i.a,{className:"reload-btn",onClick:Y,type:"primary",icon:c.a.createElement(u.a,null)}))),c.a.createElement(o.a,{flex:"900px",className:"type-result-box ".concat(S?"show":"")},c.a.createElement("div",{className:"type-result"},c.a.createElement(s.a,{justify:"center",gutter:80},c.a.createElement(o.a,{span:6},c.a.createElement("div",{className:"label"},"WPM"),c.a.createElement("div",{className:"show-data"},h.current.wpm)),c.a.createElement(o.a,{span:6},c.a.createElement("div",{className:"label"},"\u6b63\u786e\u7387"),c.a.createElement("div",{className:"show-data"},h.current.acc,"%")),c.a.createElement(o.a,{span:6},c.a.createElement("div",{className:"label"},"\u7528\u65f6"),c.a.createElement("div",{className:"show-data"},h.current.time.secs,"s")))),c.a.createElement("div",{className:"reload-line"},c.a.createElement(i.a,{className:"reload-btn",onClick:Y,type:"primary",icon:c.a.createElement(u.a,null)})))))}))}}]);
//# sourceMappingURL=4.50ec5f0e.chunk.js.map