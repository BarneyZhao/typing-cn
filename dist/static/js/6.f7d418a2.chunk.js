(this["webpackJsonptyping-cn"]=this["webpackJsonptyping-cn"]||[]).push([[6],{294:function(e,t,r){"use strict";var n=r(124),a={shuffle:function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e},getWords:function(e,t){return"1"!==e&&t&&0!==t.length?a.jsonCopy(t):a.jsonCopy(n.a)},jsonCopy:function(e){return JSON.parse(JSON.stringify(e))}};t.a=a},318:function(e,t,r){},350:function(e,t,r){"use strict";r.r(t);var n=r(19),a=r(312),c=r(46),o=r(0),u=r.n(o),l=r(356),s=r(355),i=r(278),m=r(122),f=r(49),d=r(336),p=r(283),b=r(284),h=r(357),E=r(358),j=r(317),v=(r(318),r(62)),O=r(294),g=l.a.Countdown,w=s.a.Panel,N=function(e){var t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r<10?"0":"").concat(r)};t.default=Object(v.b)((function(e){var t=Object(o.useState)(!0),r=Object(c.a)(t,2),l=r[0],v=r[1],C=Object(o.useState)(0),y=Object(c.a)(C,2),x=y[0],S=y[1],W=Object(o.useState)(0),R=Object(c.a)(W,2),k=R[0],T=R[1],$=Object(o.useState)([]),A=Object(c.a)($,2),M=A[0],J=A[1],I=Object(o.useState)(""),P=Object(c.a)(I,2),V=P[0],D=P[1],F=Object(o.useState)(!1),H=Object(c.a)(F,2),K=H[0],U=H[1],q=Object(o.useRef)(O.a.getWords(e.$state.root.wordsMode,e.$state.root.customerWords)),z=Object(o.useRef)(null),B=Object(o.useRef)(null),G=Object(o.useRef)(0),L=Object(o.useRef)(!1),Q=Object(o.useRef)(0),X=Object(o.useRef)(0),Y=Object(o.useRef)(!1),Z=Object(o.useRef)(53),_=Object(o.useRef)(0),ee=Object(o.useRef)(parseInt(e.$state.root.countdownTime,10)),te=Object(o.useState)(N(ee.current)),re=Object(c.a)(te,2),ne=re[0],ae=re[1],ce=Object(o.useState)(!1),oe=Object(c.a)(ce,2),ue=oe[0],le=oe[1],se=Object(o.useRef)({wpm:0,correct:0,wrong:0,inputWordArr:[]}),ie=function(e){J((function(t){var r=Object(a.a)(q.current);return e?(G.current=0,[Object(n.a)({isCorrect:null},r[G.current])]):(G.current+=1,G.current>=r.length&&(G.current=0),t.concat(Object(n.a)({isCorrect:null},r[G.current])))}))},me=function(e,t){var r=!0;return e.forEach((function(e,n){t.charAt(n)!==e&&(r=!1)})),r},fe=Object(o.useCallback)((function(){L.current=!1,X.current=0,Y.current=!1,_.current=0,U(!1),D(""),T(0),q.current=O.a.shuffle(q.current),ie(!0),setTimeout((function(){B.current.focus(),se.current={wpm:0,correct:0,wrong:0,inputWordArr:[]}}),10)}),[]);return Object(o.useEffect)((function(){if(z){var e=z.current.lastElementChild;if(!e||!e.lastElementChild)return;var t=z.current.scrollTop;Array.from(e.children).forEach((function(r,n){Z.current=r.offsetHeight;var a=r.offsetTop-e.offsetTop,c=Z.current+t,o=c-5<a&&a<c+5;!L.current&&o&&(Q.current=n,L.current=!0)})),e.lastElementChild.offsetTop-e.offsetTop-t<3*Z.current+1&&ie()}}),[M.length]),Object(o.useEffect)((function(){if(!K)if(""!==V){Y.current||function(){var e=ee.current;S(Date.now()+1e3*e)}(),Y.current=!0;var e=Array.from(V.trim());if(" "===V[V.length-1]){if(D(""),0===e.length)return;J((function(t){var r=Object(a.a)(t),n=r[k],c=me(e,n.text);return r[k].isCorrect=c&&e.length===n.text.length,se.current.inputWordArr.push(Object.assign({input:e.join("")},r[k])),r})),T(k+1),k+1===Q.current&&(X.current+=1,z.current.scrollTop=Z.current*X.current,L.current=!1,ie())}else J((function(t){var r=Object(a.a)(t),n=r[k],c=me(e,n.text);return r[k].isCorrect=!1!==c&&null,r}))}else J((function(e){var t=Object(a.a)(e);return t[k]&&(t[k].isCorrect=null),t}))}),[k,K,V]),Object(o.useEffect)((function(){q.current=O.a.getWords(e.$state.root.wordsMode,e.$state.root.customerWords),setTimeout((function(){fe(),v(!1)}),1e3)}),[e.$state.root.wordsMode,e.$state.root.customerWords,fe]),u.a.createElement("div",{className:"home"},u.a.createElement(i.a,{justify:"center",align:"middle"},u.a.createElement(m.a,{flex:"450px",className:"home-scale-box-".concat(e.$state.root.uiScale)},u.a.createElement("div",{className:"hide-control"},u.a.createElement(f.a,{tabIndex:-1,type:"link",onClick:function(){return le((function(e){return!e}))}},ue?"\u663e\u793a":"\u9690\u85cf","\u62fc\u97f3")),u.a.createElement("div",{className:"home-show-main"},K&&u.a.createElement("div",{className:"type-end"}),u.a.createElement(d.a,{spinning:l,delay:50,wrapperClassName:"loading-wrapper"},u.a.createElement("div",{className:"home-show-main-window",ref:z},u.a.createElement(i.a,{gutter:12},M.map((function(e,t){return u.a.createElement(m.a,{key:t,className:"home-show-main-window-item ".concat(!0===e.isCorrect?"correct":""," ").concat(!1===e.isCorrect?"incorrect":"")},u.a.createElement("div",{className:"home-show-main-window--label ".concat(k===t?"acting":"")},e.label),u.a.createElement("div",{className:"home-show-main-window--text ".concat(ue?"hide":"")},e.text))})))))),u.a.createElement(i.a,{justify:"space-between",align:"middle",gutter:0},u.a.createElement(m.a,{flex:"285px"},u.a.createElement(p.a,{className:"home-input",ref:B,value:V,onChange:function(e){D(e.target.value)},onKeyUp:function(e){13===e.keyCode&&fe(),K||(_.current+=1)}})),u.a.createElement(m.a,{flex:"90px"},u.a.createElement(b.a,{content:u.a.createElement("div",null,u.a.createElement(h.a,{defaultValue:ee.current,onChange:function(e){e&&/^\d+$/g.test(String(e))&&(ee.current=Number(e),ae(N(Number(e))))}}),u.a.createElement("span",null,"\u79d2")),onVisibleChange:function(){return e.$dispatch("setCountdownTime",String(ee.current))},overlayClassName:"home-countdown-popover",placement:"bottom",title:"",trigger:"click"},u.a.createElement("div",{className:"home-countdown"},u.a.createElement(g,{className:"home-countdown-main",value:x,format:"m:ss",onFinish:function(){if(Y.current){var e=se.current.inputWordArr,t=e.filter((function(e){return!0===e.isCorrect})).length;se.current={wpm:Math.round(t/(ee.current/60)),correct:t,wrong:e.filter((function(e){return!1===e.isCorrect})).length,inputWordArr:e},U(!0),console.log(M)}}}),u.a.createElement("div",{className:"home-countdown-placeholder ".concat(Y.current?"time-run":"")},ne)))),u.a.createElement(m.a,{flex:"50px"},u.a.createElement(f.a,{className:"home-reload-btn",onClick:fe,type:"primary",icon:u.a.createElement(j.a,null)}))),u.a.createElement("div",{className:"home-type-result-container"},K&&u.a.createElement(i.a,{className:"home-type-result"},u.a.createElement(m.a,{span:24},u.a.createElement("div",{className:"result-wpm"},se.current.wpm,"WPM")),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-title"},"\u6b63\u786e")),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-numbers correct"},se.current.correct)),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-title"},"\u9519\u8bef")),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-numbers wrong"},se.current.wrong)),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-title"},"\u6309\u952e\u603b\u6570")),u.a.createElement(m.a,{span:12},u.a.createElement("div",{className:"result-numbers"},_.current)),u.a.createElement(m.a,{span:24},u.a.createElement(s.a,{ghost:!0,className:"type-resule-collapse"},u.a.createElement(w,{header:"\u5c55\u5f00\u6b64\u6b21\u8f93\u5165",key:"1"},se.current.inputWordArr.map((function(e,t){return u.a.createElement(E.a,{color:e.isCorrect?"success":"error",key:t},u.a.createElement("div",null,e.label),u.a.createElement("div",null,e.input))}))))))))))}))}}]);
//# sourceMappingURL=6.f7d418a2.chunk.js.map