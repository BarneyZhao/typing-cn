(this["webpackJsonptyping-cn"]=this["webpackJsonptyping-cn"]||[]).push([[4],{292:function(e,t,r){"use strict";var a=r(124),n={shuffle:function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),a=e[r];e[r]=e[t],e[t]=a}return e},getWords:function(e,t){return"1"!==e&&t&&0!==t.length?n.jsonCopy(t):n.jsonCopy(a.a)},jsonCopy:function(e){return JSON.parse(JSON.stringify(e))}};t.a=n},335:function(e,t,r){},341:function(e,t,r){"use strict";var a=r(0),n={name:"reload",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]}},c=r(26),l=function(e,t){return a.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};l.displayName="ReloadOutlined";t.a=a.forwardRef(l)},344:function(e,t,r){"use strict";r.r(t);var a=r(47),n=r(0),c=r.n(n),l=r(282),o=r(278),s=r(122),i=r(49),u=r(341),m=(r(335),r(62)),f=r(292),d=function(e){return Array.from(e.children)};t.default=Object(m.b)((function(e){var t=Object(n.useRef)(null),r=Object(n.useRef)(null),m=Object(n.useRef)(null),g=Object(n.useRef)(f.a.getWords(e.$state.root.wordsMode,e.$state.root.customerWords)),p=Object(n.useRef)([0,0]),h=Object(n.useRef)({wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}}),b=Object(n.useState)(!1),v=Object(a.a)(b,2),C=v[0],E=v[1],y=Object(n.useState)(!1),j=Object(a.a)(y,2),N=j[0],O=j[1],w=Object(n.useState)(!1),x=Object(a.a)(w,2),A=x[0],k=x[1],B=Object(n.useState)(!1),S=Object(a.a)(B,2),R=S[0],M=S[1],W=Object(n.useState)(""),$=Object(a.a)(W,2),I=$[0],D=$[1],J=Object(n.useState)([]),T=Object(a.a)(J,2),z=T[0],F=T[1],P=Object(n.useState)({top:0,left:0}),G=Object(a.a)(P,2),K=G[0],_=G[1],q=Object(n.useState)(30),H=Object(a.a)(q,2),L=H[0],Q=H[1],U=function(){var e=p.current,t=r.current.getBoundingClientRect(),a=d(r.current)[e[0]];if(a){var n=Array.from(a.getElementsByClassName("letter"));if(n.length<=e[1]){var c=n[e[1]-1].getBoundingClientRect();_({top:c.top-t.top+2,left:c.left-t.left+c.width})}else{var l=n[e[1]].getBoundingClientRect();_({top:l.top-t.top+2,left:l.left-t.left})}}},V=Object(n.useCallback)((function(e,t){var a,n=p.current,c=""===I||" "===I.charAt(I.length-1);if(32===e)a=c?n:[n[0]+1,0];else{if(n[1]>=z[n[0]].letterArr.length){var l=d(r.current)[n[0]],o=document.createElement("code");o.className="letter wrong extra-letter",o.innerText=t,l.appendChild(o)}a=[n[0],n[1]+1]}p.current=a,U(),F((function(l){var o=l[n[0]].letterArr[n[1]];if(o&&32!==e&&(o.isCorrect=t===o.letter,l[n[0]].letterArr[n[1]]=o),32===e&&!c)if(l[n[0]].letterArr.some((function(e){return null===e.isCorrect})))l[n[0]].isSkip=!0,l[n[0]].isCorrect=!1;else{var s=d(r.current)[n[0]].getElementsByClassName("extra-letter");s&&0!==s.length?l[n[0]].isCorrect=!1:l[n[0]].isCorrect=l[n[0]].letterArr.every((function(e){return e.isCorrect}))}return(a[0]>l.length-1||n[0]===l.length-1&&n[1]===l[n[0]].letterArr.length-1)&&(l[n[0]].isCorrect=l[n[0]].letterArr.every((function(e){return e.isCorrect})),h.current.right=l.filter((function(e){return e.isCorrect})).length,h.current.wrong=l.length-h.current.right,h.current.acc=Math.round(h.current.right/(h.current.right+h.current.wrong)*100),h.current.time.secs=Math.round((Date.now()-h.current.time.begin)/1e3),h.current.wpm=(h.current.right/(h.current.time.secs/60)).toFixed(2),E(!1),k(!0),setTimeout((function(){M(!0)}),150)),l})),D((function(r){return 32!==e||""!==r&&" "!==r.charAt(r.length-1)?r+t:r}))}),[I,z]),X=Object(n.useCallback)((function(){var e=I.charAt(I.length-1);if(""!==e){var t,a=p.current;if(" "===e)if(z[a[0]-1].isCorrect)t=a;else if(z[a[0]-1].isSkip){var n=z[a[0]-1].letterArr.findIndex((function(e){return null===e.isCorrect}));t=[a[0]-1,n]}else{var c=d(r.current)[a[0]-1].getElementsByClassName("letter");t=[a[0]-1,c.length]}else{var l=d(r.current)[a[0]],o=l.getElementsByClassName("extra-letter");o&&o.length>0&&l.removeChild(o[o.length-1]),t=[a[0],a[1]-1]}p.current=t,U(),F((function(t){return" "===e?!1===t[a[0]-1].isCorrect&&(t[a[0]-1].isCorrect=null):t[a[0]].letterArr.length>=a[1]&&(t[a[0]].letterArr[a[1]-1].isCorrect=null,t[a[0]].isCorrect=null),t})),D((function(t){var r=!0;return" "===e&&z[a[0]-1].isCorrect&&(r=!1),r?t.substring(0,t.length-1):t}))}}),[I,z]),Y=function(){E(!0),t.current.focus()},Z=Object(n.useCallback)((function(){p.current=[0,0],g.current=f.a.shuffle(g.current),h.current={wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}};var e=r.current.getElementsByClassName("extra-letter");0!==e.length&&Array.from(e).forEach((function(e){e.parentNode.removeChild(e)})),F(f.a.jsonCopy(g.current.slice(0,L)).map((function(e){return Object.assign({},e,{letterArr:Array.from(e.text).map((function(e){return{letter:e,isCorrect:null}})),isCorrect:null,isSkip:!1})}))),D(""),k(!1),M(!1),setTimeout((function(){Y(),U()}),10)}),[L]);return Object(n.useEffect)((function(){g.current=f.a.getWords(e.$state.root.wordsMode,e.$state.root.customerWords),Z()}),[e.$state.root.wordsMode,e.$state.root.customerWords,Z,L]),c.a.createElement("div",{className:"Monkey"},c.a.createElement("div",{className:"word-count-radio"},c.a.createElement(l.a.Group,{value:L,size:"small",onChange:function(e){Q(e.target.value)}},c.a.createElement(l.a.Button,{tabIndex:-1,value:20},"20"),c.a.createElement(l.a.Button,{tabIndex:-1,value:30},"30"),c.a.createElement(l.a.Button,{tabIndex:-1,value:40},"40"),c.a.createElement(l.a.Button,{tabIndex:-1,value:50},"50"))),c.a.createElement(o.a,{justify:"center",align:"middle"},c.a.createElement(s.a,{flex:"900px",className:"type-main-box ".concat(A?"fading":""," ").concat(R?"hide":"")},c.a.createElement("div",{className:"caret ".concat(C?N?"flash":"":"hide"),ref:m,style:{transform:"translate3d(".concat(K.left,"px,").concat(K.top,"px,0)")}}),c.a.createElement("div",{className:"words-box",onClick:Y,ref:r},z.map((function(e,t){var r;return c.a.createElement("div",{className:"word ".concat(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),key:t},c.a.createElement("div",{className:"label"},e.label),null===(r=e.letterArr)||void 0===r?void 0:r.map((function(e,r){return c.a.createElement("code",{className:"letter ".concat(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),key:"".concat(t,"_").concat(r)},e.letter)})))}))),c.a.createElement("input",{className:"hidden-input",type:"text",ref:t,onKeyDown:function(e){9!==e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.persist()),R||(O(!1),1===e.key.length?(0===h.current.time.begin&&(h.current.time.begin=Date.now()),V(e.keyCode,e.key)):8===e.keyCode&&X())},onBlur:function(){E(!1)},onFocus:function(){E(!0),O(!0)}}),c.a.createElement("div",{className:"reload-line"},c.a.createElement(i.a,{className:"reload-btn",onClick:Z,type:"primary",icon:c.a.createElement(u.a,null)})),c.a.createElement("div",{className:"tip-line ".concat(N?"":"hide")},c.a.createElement("div",null,"\u70b9\u51fb\u8bcd\u5757\u8fdb\u5165\u8f93\u5165\u72b6\u6001"),c.a.createElement("div",null,"\u8f93\u5165\u6b63\u786e\u7684\u62fc\u97f3\u5b57\u6bcd\uff0c\u7136\u540e\u7a7a\u683c"),c.a.createElement("div",null,"\u8f93\u5165\u72b6\u6001\u4e0b",c.a.createElement("code",null,"Tab"),"\u540e\u56de\u8f66\u53ef\u4ee5\u76f4\u63a5\u5237\u65b0"),c.a.createElement("div",null,"\u89c9\u5f97\u6709\u610f\u601d\u53ef\u4ee5\u6253\u8d4f\u4e00\u4e0b(#^.^#)(\u5728\u4e0a\u9762\u2191\u2191)"))),c.a.createElement(s.a,{flex:"900px",className:"type-result-box ".concat(R?"show":"")},c.a.createElement("div",{className:"type-result"},c.a.createElement(o.a,{justify:"center",gutter:80},c.a.createElement(s.a,{span:6},c.a.createElement("div",{className:"label"},"WPM"),c.a.createElement("div",{className:"show-data"},h.current.wpm)),c.a.createElement(s.a,{span:6},c.a.createElement("div",{className:"label"},"\u6b63\u786e\u7387"),c.a.createElement("div",{className:"show-data"},h.current.acc,"%")),c.a.createElement(s.a,{span:6},c.a.createElement("div",{className:"label"},"\u7528\u65f6"),c.a.createElement("div",{className:"show-data"},h.current.time.secs,"s")))),c.a.createElement("div",{className:"reload-line"},c.a.createElement(i.a,{className:"reload-btn",onClick:Z,type:"primary",icon:c.a.createElement(u.a,null)})))))}))}}]);
//# sourceMappingURL=4.3eeabe37.chunk.js.map