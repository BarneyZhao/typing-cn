(this["webpackJsonptyping-cn"]=this["webpackJsonptyping-cn"]||[]).push([[6],{268:function(e,t,r){},288:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r(287),c=r(27),o=r(292),l=r(253),u=r(254),s=r(289),i=r(251),m=r(255),f=r(293),d=r(29),h=r(294),b=r(0),E=r.n(b),p=(r(268),r(59)),j=r(98),v=o.a.Countdown,O=function(e,t){return"1"!==e&&t&&0!==t.length?t:j.a},g=function(e){var t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r<10?"0":"").concat(r)};t.default=Object(p.b)((function(e){var t=Object(b.useState)(!0),r=Object(c.a)(t,2),o=r[0],p=r[1],j=Object(b.useState)(0),w=Object(c.a)(j,2),C=w[0],N=w[1],y=Object(b.useState)(0),x=Object(c.a)(y,2),R=x[0],S=x[1],T=Object(b.useState)([]),$=Object(c.a)(T,2),M=$[0],k=$[1],W=Object(b.useState)(""),A=Object(c.a)(W,2),J=A[0],V=A[1],D=Object(b.useState)(!1),F=Object(c.a)(D,2),H=F[0],I=F[1],K=Object(b.useRef)(O(e.$state.root.wordsMode,e.$state.root.customerWords)),P=Object(b.useRef)(null),U=Object(b.useRef)(null),q=Object(b.useRef)(0),z=Object(b.useRef)(!1),B=Object(b.useRef)(0),G=Object(b.useRef)(0),L=Object(b.useRef)(!1),Q=Object(b.useRef)(53),X=Object(b.useRef)(0),Y=Object(b.useRef)(parseInt(e.$state.root.countdownTime,10)),Z=Object(b.useState)(g(Y.current)),_=Object(c.a)(Z,2),ee=_[0],te=_[1],re=function(e){k((function(t){var r=Object(a.a)(K.current);return e?(q.current=0,[Object(n.a)({isCorrect:null},r[q.current])]):(q.current+=1,q.current>=r.length&&(q.current=0),t.concat(Object(n.a)({isCorrect:null},r[q.current])))}))},ne=function(e,t){var r=!0;return e.forEach((function(e,n){t.charAt(n)!==e&&(r=!1)})),r},ae=Object(b.useCallback)((function(){z.current=!1,G.current=0,L.current=!1,X.current=0,I(!1),V(""),S(0),K.current=function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}(K.current),re(!0),setTimeout((function(){U.current.focus()}),10)}),[]);return Object(b.useEffect)((function(){if(P){var e=P.current.lastElementChild;if(!e||!e.lastElementChild)return;var t=P.current.scrollTop;Array.from(e.children).forEach((function(r,n){Q.current=r.offsetHeight;var a=r.offsetTop-e.offsetTop,c=Q.current+t,o=c-5<a&&a<c+5;!z.current&&o&&(B.current=n,z.current=!0)})),e.lastElementChild.offsetTop-e.offsetTop-t<3*Q.current+1&&re()}}),[M.length]),Object(b.useEffect)((function(){if(!H)if(""!==J){L.current||function(){var e=Y.current;N(Date.now()+1e3*e)}(),L.current=!0;var e=Array.from(J.trim());if(" "===J[J.length-1]){if(V(""),0===e.length)return;k((function(t){var r=Object(a.a)(t),n=r[R],c=ne(e,n.text);return r[R].isCorrect=c&&e.length===n.text.length,r})),S(R+1),R+1===B.current&&(G.current+=1,P.current.scrollTop=Q.current*G.current,z.current=!1,re())}else k((function(t){var r=Object(a.a)(t),n=r[R],c=ne(e,n.text);return r[R].isCorrect=!1!==c&&null,r}))}else k((function(e){var t=Object(a.a)(e);return t[R]&&(t[R].isCorrect=null),t}))}),[R,H,J]),Object(b.useEffect)((function(){K.current=O(e.$state.root.wordsMode,e.$state.root.customerWords),setTimeout((function(){ae(),p(!1)}),1e3)}),[e.$state.root.wordsMode,e.$state.root.customerWords,ae]),E.a.createElement("div",{className:"home"},E.a.createElement(l.a,{justify:"center",align:"middle"},E.a.createElement(u.a,{flex:"450px",className:"home-scale-box-".concat(e.$state.root.uiScale)},E.a.createElement("div",{className:"home-show-main"},H&&E.a.createElement("div",{className:"type-end"}),E.a.createElement(s.a,{spinning:o,delay:50,wrapperClassName:"loading-wrapper"},E.a.createElement("div",{className:"home-show-main-window",ref:P},E.a.createElement(l.a,{gutter:12},M.map((function(e,t){return E.a.createElement(u.a,{key:t,className:"home-show-main-window-item ".concat(!0===e.isCorrect?"correct":""," ").concat(!1===e.isCorrect?"incorrect":"")},E.a.createElement("div",{className:"home-show-main-window--label ".concat(R===t?"acting":"")},e.label),E.a.createElement("div",{className:"home-show-main-window--text"},e.text))})))))),E.a.createElement(l.a,{justify:"space-between",align:"middle",gutter:0},E.a.createElement(u.a,{flex:"285px"},E.a.createElement(i.a,{className:"home-input",ref:U,value:J,onChange:function(e){V(e.target.value)},onKeyUp:function(e){13===e.keyCode&&ae(),H||(X.current+=1)}})),E.a.createElement(u.a,{flex:"90px"},E.a.createElement(m.a,{content:E.a.createElement("div",null,E.a.createElement(f.a,{defaultValue:Y.current,onChange:function(e){e&&/^\d+$/g.test(String(e))&&(Y.current=e,te(g(e)))}}),E.a.createElement("span",null,"\u79d2")),onVisibleChange:function(){return e.$dispatch("setCountdownTime",String(Y.current))},overlayClassName:"home-countdown-popover",placement:"bottom",title:"",trigger:"click"},E.a.createElement("div",{className:"home-countdown"},E.a.createElement(v,{className:"home-countdown-main",value:C,format:"m:ss",onFinish:function(){L.current&&(I(!0),console.log(M))}}),E.a.createElement("div",{className:"home-countdown-placeholder ".concat(L.current?"time-run":"")},ee)))),E.a.createElement(u.a,{flex:"50px"},E.a.createElement(d.a,{className:"home-reload-btn",onClick:ae,type:"primary",icon:E.a.createElement(h.a,null)}))),H&&E.a.createElement(l.a,{className:"home-type-result"},E.a.createElement(u.a,{span:24},E.a.createElement("div",{className:"result-wpm"},Math.round(M.filter((function(e){return null!==e.isCorrect})).length/(Y.current/60)),"WPM")),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-title"},"\u6b63\u786e")),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-numbers correct"},M.filter((function(e){return!0===e.isCorrect})).length)),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-title"},"\u9519\u8bef")),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-numbers wrong"},M.filter((function(e){return!1===e.isCorrect})).length)),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-title"},"\u6309\u952e\u603b\u6570")),E.a.createElement(u.a,{span:12},E.a.createElement("div",{className:"result-numbers"},X.current))))))}))}}]);
//# sourceMappingURL=6.e4a39a13.chunk.js.map