{"version":3,"sources":["utils/wordTool.ts","views/fingers/Fingers.tsx"],"names":["wordTool","shuffle","arr","i","length","rIndex","Math","floor","random","temp","getWords","mode","propWords","jsonCopy","WORDS","obj","JSON","parse","stringify","Countdown","Statistic","Panel","Collapse","getCountdownStr","value","minutes","secs","storeConnect","props","useState","loading","setLoading","deadline","setDeadline","actingWordIndex","setActingWordIndex","wordArr","setWordArr","wordInput","setWordInput","typingEnd","setTypingEnd","wordsBaseRef","useRef","$state","root","wordsMode","customerWords","mainWindowEl","mainInputEl","wordIndexRef","lineIndexLockRef","nextLineStartIndexRef","lineCountRef","timeStartRef","oneLineHeightRef","keystrokeCountRef","countdownTimeRef","parseInt","countdownTime","current","deadlineText","setDeadlineText","isHideCharacter","setIsHideCharacter","typingResultRef","wpm","correct","wrong","inputWordArr","pushWordToArr","isInit","wordsTemp","isCorrect","concat","checkInputVal","inputArr","target","forEach","char","index","charAt","reloadBtn","useCallback","setTimeout","focus","useEffect","wordContainerRow","lastElementChild","outterScrollTop","scrollTop","Array","from","children","child","offsetHeight","childTopToParent","offsetTop","showsSecLine","isNextLineCheck","time","Date","now","countDownStart","trim","tempArr","targetWord","text","push","Object","assign","input","join","className","justify","align","flex","uiScale","tabIndex","type","onClick","v","spinning","delay","wrapperClassName","ref","gutter","map","item","key","label","onChange","evt","onKeyUp","keyCode","content","defaultValue","test","String","Number","onVisibleChange","$dispatch","overlayClassName","placement","title","trigger","format","onFinish","correctCount","filter","word","round","console","log","icon","span","ghost","header","w","wi","color"],"mappings":"8GAAA,aAEMA,EAAW,CACbC,QADa,SACLC,GACJ,IAAK,IAAIC,EAAID,EAAIE,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACtC,IAAIE,EAASC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,IACzCM,EAAOP,EAAIG,GACfH,EAAIG,GAAUH,EAAIC,GAClBD,EAAIC,GAAKM,EAEb,OAAOP,GAEXQ,SAVa,SAUJC,EAAcC,GACnB,MAAa,MAATD,GAAgBC,GAAkC,IAArBA,EAAUR,OAChCJ,EAASa,SAAiBD,GAE1BZ,EAASa,SAAiBC,MAGzCD,SAjBa,SAiBDE,GACR,OAAOC,KAAKC,MAAMD,KAAKE,UAAUH,MAK1Bf,O,uOCNPmB,EAAcC,IAAdD,UACAE,EAAUC,IAAVD,MAEFE,EAAkB,SAACC,GACrB,IAAMC,EAAUnB,KAAKC,MAAMiB,EAAQ,IAC7BE,EAAOF,EAAQ,GACrB,MAAM,GAAN,OAAUC,EAAV,YAAqBC,EAAO,GAAK,IAAM,IAAvC,OAA4CA,IAiWjCC,uBA9VmC,SAACC,GAAW,IAAD,EAC3BC,oBAAS,GADkB,mBAClDC,EADkD,KACzCC,EADyC,OAEzBF,mBAAS,GAFgB,mBAElDG,EAFkD,KAExCC,EAFwC,OAGXJ,mBAAS,GAHE,mBAGlDK,EAHkD,KAGjCC,EAHiC,OAI3BN,mBAA0D,IAJ/B,mBAIlDO,EAJkD,KAIzCC,EAJyC,OAKvBR,mBAAS,IALc,mBAKlDS,EALkD,KAKvCC,EALuC,OAMvBV,oBAAS,GANc,mBAMlDW,EANkD,KAMvCC,EANuC,KAOnDC,EAAeC,iBACjB3C,IAASU,SAASkB,EAAMgB,OAAOC,KAAKC,UAAWlB,EAAMgB,OAAOC,KAAKE,gBAE/DC,EAAeL,iBAAO,MACtBM,EAAcN,iBAAO,MACrBO,EAAeP,iBAAO,GACtBQ,EAAmBR,kBAAO,GAC1BS,EAAwBT,iBAAO,GAC/BU,EAAeV,iBAAO,GACtBW,EAAeX,kBAAO,GACtBY,EAAmBZ,iBAAO,IAC1Ba,EAAoBb,iBAAO,GAC3Bc,GAAmBd,iBAAOe,SAAS9B,EAAMgB,OAAOC,KAAKc,cAAe,KAnBjB,GAoBjB9B,mBAASN,EAAgBkC,GAAiBG,UApBzB,qBAoBlDC,GApBkD,MAoBpCC,GApBoC,SAqBXjC,oBAAS,GArBE,qBAqBlDkC,GArBkD,MAqBjCC,GArBiC,MAsBnDC,GAAkBtB,iBAAO,CAC3BuB,IAAK,EACLC,QAAS,EACTC,MAAO,EACPC,aAAc,KAOZC,GAAgB,SAACC,GACnBlC,GAAW,SAACnC,GACR,IAAMsE,EAAS,YAAO9B,EAAakB,SACnC,OAAIW,GACArB,EAAaU,QAAU,EAChB,CAAC,aAAEa,UAAW,MAASD,EAAUtB,EAAaU,aAErDV,EAAaU,SAAW,EACpBV,EAAaU,SAAWY,EAAUpE,SAAQ8C,EAAaU,QAAU,GAC9D1D,EAAIwE,OAAJ,aAAaD,UAAW,MAASD,EAAUtB,EAAaU,gBAIrEe,GAAgB,SAACC,EAAoBC,GACvC,IAAIJ,GAAY,EAMhB,OALAG,EAASE,SAAQ,SAACC,EAAMC,GAChBH,EAAOI,OAAOD,KAAWD,IACzBN,GAAY,MAGbA,GAsBLS,GAAYC,uBAAY,WAC1BhC,EAAiBS,SAAU,EAC3BP,EAAaO,QAAU,EACvBN,EAAaM,SAAU,EACvBJ,EAAkBI,QAAU,EAC5BnB,GAAa,GACbF,EAAa,IACbJ,EAAmB,GACnBO,EAAakB,QAAU5D,IAASC,QAAQyC,EAAakB,SACrDU,IAAc,GACdc,YAAW,WACNnC,EAAYW,QAAgByB,QAC7BpB,GAAgBL,QAAU,CACtBM,IAAK,EACLC,QAAS,EACTC,MAAO,EACPC,aAAc,MAEnB,MACJ,IA8FH,OAvFAiB,qBAAU,WACN,GAAItC,EAAc,CACd,IAAMuC,EAAoBvC,EAAaY,QAAgB4B,iBACvD,IAAKD,IAAqBA,EAAiBC,iBAAkB,OAC7D,IAAMC,EAAmBzC,EAAaY,QAAgB8B,UACtDC,MAAMC,KAAKL,EAAiBM,UAAUf,SAAQ,SAACgB,EAAYd,GACvDzB,EAAiBK,QAAUkC,EAAMC,aACjC,IAAMC,EAAmBF,EAAMG,UAAYV,EAAiBU,UACtDC,EAAe3C,EAAiBK,QAAU6B,EAC1CU,EACFD,EAAe,EAAIF,GAAoBA,EAAmBE,EAAe,GACxE/C,EAAiBS,SAAWuC,IAC7B/C,EAAsBQ,QAAUoB,EAChC7B,EAAiBS,SAAU,MAI/B2B,EAAiBC,iBAAiBS,UAC9BV,EAAiBU,UACjBR,EACuB,EAA3BlC,EAAiBK,QAAc,GAE/BU,QAGT,CAAClC,EAAQhC,SAEZkF,qBAAU,WACN,IAAI9C,EACJ,GAAkB,KAAdF,EAAJ,CAUKgB,EAAaM,SA/GC,WACnB,IAAMwC,EAAO3C,GAAiBG,QAC9B3B,EAAYoE,KAAKC,MAAe,IAAPF,GA6GEG,GAC3BjD,EAAaM,SAAU,EACvB,IAAMgB,EAAWe,MAAMC,KAAKtD,EAAUkE,QACtC,GAAwC,MAApClE,EAAUA,EAAUlC,OAAS,GAAY,CAEzC,GADAmC,EAAa,IACW,IAApBqC,EAASxE,OAAc,OAC3BiC,GAAW,SAACnC,GACR,IAAIuG,EAAO,YAAOvG,GACZwG,EAAaD,EAAQvE,GACrBuC,EAAYE,GAAcC,EAAU8B,EAAWC,MAOrD,OANAF,EAAQvE,GAAiBuC,UACrBA,GAAaG,EAASxE,SAAWsG,EAAWC,KAAKvG,OAErD6D,GAAgBL,QAAQS,aAAauC,KACjCC,OAAOC,OAAO,CAAEC,MAAOnC,EAASoC,KAAK,KAAOP,EAAQvE,KAEjDuE,KAEXtE,EAAmBD,EAAkB,GACjCA,EAAkB,IAAMkB,EAAsBQ,UAC9CP,EAAaO,SAAW,EACvBZ,EAAaY,QAAgB8B,UAC1BnC,EAAiBK,QAAUP,EAAaO,QAC5CT,EAAiBS,SAAU,EAC3BU,WAGJjC,GAAW,SAACnC,GACR,IAAMuG,EAAO,YAAOvG,GACdwG,EAAaD,EAAQvE,GACrBuC,EAAYE,GAAcC,EAAU8B,EAAWC,MAErD,OADAF,EAAQvE,GAAiBuC,WAA0B,IAAdA,GAA8B,KAC5DgC,UAzCXpE,GAAW,SAACnC,GACR,IAAMuG,EAAO,YAAOvG,GAIpB,OAHIuG,EAAQvE,KACRuE,EAAQvE,GAAiBuC,UAAY,MAElCgC,OAuChB,CAACvE,EAAiBM,EAAWF,IAEhCgD,qBAAU,WACN5C,EAAakB,QAAU5D,IAASU,SAC5BkB,EAAMgB,OAAOC,KAAKC,UAClBlB,EAAMgB,OAAOC,KAAKE,eAEtBqC,YAAW,WACPF,KACAnD,GAAW,KACZ,OACJ,CAACH,EAAMgB,OAAOC,KAAKC,UAAWlB,EAAMgB,OAAOC,KAAKE,cAAemC,KAG9D,yBAAK+B,UAAU,QACX,kBAAC,IAAD,CAAKC,QAAQ,SAASC,MAAM,UACxB,kBAAC,IAAD,CAAKC,KAAK,QAAQH,UAAS,yBAAoBrF,EAAMgB,OAAOC,KAAKwE,UAC7D,yBAAKJ,UAAU,gBACX,kBAAC,IAAD,CACIK,UAAW,EACXC,KAAK,OACLC,QAAS,kBAAMxD,IAAmB,SAACyD,GAAD,OAAQA,OAEzC1D,GAAkB,eAAO,eAL9B,iBAQJ,yBAAKkD,UAAU,kBACVzE,GAAa,yBAAKyE,UAAU,aAC7B,kBAAC,IAAD,CAAMS,SAAU5F,EAAS6F,MAAO,GAAIC,iBAAiB,mBACjD,yBAAKX,UAAU,wBAAwBY,IAAK7E,GACxC,kBAAC,IAAD,CAAK8E,OAAQ,IACR1F,EAAQ2F,KAAI,SAACC,EAAMhD,GAAP,OACT,kBAAC,IAAD,CACIiD,IAAKjD,EACLiC,UAAS,sCACc,IAAnBe,EAAKvD,UAAqB,UAAY,GADjC,aAEc,IAAnBuD,EAAKvD,UAAsB,YAAc,KAE7C,yBACIwC,UAAS,uCACL/E,IAAoB8C,EAAQ,SAAW,KAG1CgD,EAAKE,OAEV,yBACIjB,UAAS,sCACLlD,GAAkB,OAAS,KAG9BiE,EAAKrB,cAQlC,kBAAC,IAAD,CAAKO,QAAQ,gBAAgBC,MAAM,SAASW,OAAQ,GAChD,kBAAC,IAAD,CAAKV,KAAK,SACN,kBAAC,IAAD,CACIH,UAAU,aACVY,IAAK5E,EACLzB,MAAOc,EACP6F,SAAU,SAACC,GACP7F,EAAa6F,EAAIvD,OAAOrD,QAE5B6G,QAnJL,SAACD,GACA,KAAhBA,EAAIE,SAAgBpD,KACpB1C,IACJgB,EAAkBI,SAAW,OAmJb,kBAAC,IAAD,CAAKwD,KAAK,QACN,kBAAC,IAAD,CACImB,QACI,6BACI,kBAAC,IAAD,CACIC,aAAc/E,GAAiBG,QAC/BuE,SApMb,SAAC3G,GACpBA,GAAS,SAASiH,KAAKC,OAAOlH,MAC9BiC,GAAiBG,QAAU+E,OAAOnH,GAClCsC,GAAgBvC,EAAgBoH,OAAOnH,SAmMX,yCAGRoH,gBAAiB,kBACbhH,EAAMiH,UACF,mBACAH,OAAOjF,GAAiBG,WAGhCkF,iBAAiB,yBACjBC,UAAU,SACVC,MAAM,GACNC,QAAQ,SAER,yBAAKhC,UAAU,kBACX,kBAAC9F,EAAD,CACI8F,UAAU,sBACVzF,MAAOQ,EACPkH,OAAO,OACPC,SAnNV,WACtB,GAAI7F,EAAaM,QAAS,CACtB,IAAMS,EAAeJ,GAAgBL,QAAQS,aACvC+E,EAAe/E,EAAagF,QAAO,SAACC,GAAD,OAAkC,IAAnBA,EAAK7E,aAAoBrE,OACjF6D,GAAgBL,QAAU,CACtBM,IAAK5D,KAAKiJ,MAAMH,GAAgB3F,GAAiBG,QAAU,KAC3DO,QAASiF,EACThF,MAAOC,EAAagF,QAAO,SAACC,GAAD,OAAkC,IAAnBA,EAAK7E,aAAqBrE,OACpEiE,gBAEJ5B,GAAa,GACb+G,QAAQC,IAAIrH,OA0MY,yBACI6E,UAAS,qCACL3D,EAAaM,QAAU,WAAa,KAGvCC,OAKjB,kBAAC,IAAD,CAAKuD,KAAK,QACN,kBAAC,IAAD,CACIH,UAAU,kBACVO,QAAStC,GACTqC,KAAK,UACLmC,KAAM,kBAAC,IAAD,UAIlB,yBAAKzC,UAAU,8BACVzE,GACG,kBAAC,IAAD,CAAKyE,UAAU,oBACX,kBAAC,IAAD,CAAK0C,KAAM,IACP,yBAAK1C,UAAU,cACVhD,GAAgBL,QAAQM,IAD7B,QAKJ,kBAAC,IAAD,CAAKyF,KAAM,IACP,yBAAK1C,UAAU,gBAAf,iBAEJ,kBAAC,IAAD,CAAK0C,KAAM,IACP,yBAAK1C,UAAU,0BACVhD,GAAgBL,QAAQO,UAGjC,kBAAC,IAAD,CAAKwF,KAAM,IACP,yBAAK1C,UAAU,gBAAf,iBAEJ,kBAAC,IAAD,CAAK0C,KAAM,IACP,yBAAK1C,UAAU,wBACVhD,GAAgBL,QAAQQ,QAGjC,kBAAC,IAAD,CAAKuF,KAAM,IACP,yBAAK1C,UAAU,gBAAf,6BAEJ,kBAAC,IAAD,CAAK0C,KAAM,IACP,yBAAK1C,UAAU,kBACVzD,EAAkBI,UAG3B,kBAAC,IAAD,CAAK+F,KAAM,IACP,kBAAC,IAAD,CAAUC,OAAO,EAAM3C,UAAU,wBAC7B,kBAAC5F,EAAD,CAAOwI,OAAO,uCAAS5B,IAAI,KACtBhE,GAAgBL,QAAQS,aAAa0D,KAAI,SAAC+B,EAAGC,GAAJ,OACtC,kBAAC,IAAD,CACIC,MAAOF,EAAErF,UAAY,UAAY,QACjCwD,IAAK8B,GAEL,6BAAMD,EAAE5B,OACR,6BAAM4B,EAAE/C","file":"static/js/6.f7d418a2.chunk.js","sourcesContent":["import WORDS, { Word } from '@/words';\n\nconst wordTool = {\n    shuffle(arr: any[]) {\n        for (let i = arr.length - 1; i >= 0; i--) {\n            let rIndex = Math.floor(Math.random() * (i + 1));\n            let temp = arr[rIndex];\n            arr[rIndex] = arr[i];\n            arr[i] = temp;\n        }\n        return arr;\n    },\n    getWords(mode: string, propWords: Word[]) {\n        if (mode !== '1' && propWords && propWords.length !== 0) {\n            return wordTool.jsonCopy<Word[]>(propWords);\n        } else {\n            return wordTool.jsonCopy<Word[]>(WORDS);\n        }\n    },\n    jsonCopy<T>(obj: object) {\n        return JSON.parse(JSON.stringify(obj)) as T;\n    },\n};\n\nexport type WordType = Word;\nexport default wordTool;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n    Input,\n    Row,\n    Col,\n    Statistic,\n    Button,\n    Spin,\n    Popover,\n    InputNumber,\n    Collapse,\n    Tag,\n} from 'antd';\nimport { ReloadOutlined } from '@ant-design/icons';\n\nimport './Fingers.less';\nimport { storeConnect, MapState, MapDispatch } from '@/store/index';\nimport wordTool, { WordType } from '@/utils/wordTool';\n\nconst { Countdown } = Statistic;\nconst { Panel } = Collapse;\n\nconst getCountdownStr = (value: number) => {\n    const minutes = Math.floor(value / 60);\n    const secs = value % 60;\n    return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;\n};\n\nconst Fingers: React.FC<MapState & MapDispatch> = (props) => {\n    const [loading, setLoading] = useState(true);\n    const [deadline, setDeadline] = useState(0);\n    const [actingWordIndex, setActingWordIndex] = useState(0);\n    const [wordArr, setWordArr] = useState<Array<WordType & { isCorrect: boolean | null }>>([]);\n    const [wordInput, setWordInput] = useState('');\n    const [typingEnd, setTypingEnd] = useState(false);\n    const wordsBaseRef = useRef(\n        wordTool.getWords(props.$state.root.wordsMode, props.$state.root.customerWords)\n    );\n    const mainWindowEl = useRef(null);\n    const mainInputEl = useRef(null);\n    const wordIndexRef = useRef(0); // WORDS数组的下标\n    const lineIndexLockRef = useRef(false); // 是否设置过第二行开头元素的下标\n    const nextLineStartIndexRef = useRef(0);\n    const lineCountRef = useRef(0);\n    const timeStartRef = useRef(false);\n    const oneLineHeightRef = useRef(53);\n    const keystrokeCountRef = useRef(0);\n    const countdownTimeRef = useRef(parseInt(props.$state.root.countdownTime, 10));\n    const [deadlineText, setDeadlineText] = useState(getCountdownStr(countdownTimeRef.current));\n    const [isHideCharacter, setIsHideCharacter] = useState(false);\n    const typingResultRef = useRef({\n        wpm: 0,\n        correct: 0,\n        wrong: 0,\n        inputWordArr: [] as any[],\n    });\n\n    const countDownStart = () => {\n        const time = countdownTimeRef.current;\n        setDeadline(Date.now() + time * 1000);\n    };\n    const pushWordToArr = (isInit?: boolean) => {\n        setWordArr((arr) => {\n            const wordsTemp = [...wordsBaseRef.current];\n            if (isInit) {\n                wordIndexRef.current = 0;\n                return [{ isCorrect: null, ...wordsTemp[wordIndexRef.current] }];\n            } else {\n                wordIndexRef.current += 1;\n                if (wordIndexRef.current >= wordsTemp.length) wordIndexRef.current = 0;\n                return arr.concat({ isCorrect: null, ...wordsTemp[wordIndexRef.current] });\n            }\n        });\n    };\n    const checkInputVal = (inputArr: string[], target: string) => {\n        let isCorrect = true;\n        inputArr.forEach((char, index) => {\n            if (target.charAt(index) !== char) {\n                isCorrect = false;\n            }\n        });\n        return isCorrect;\n    };\n    const inputCountdownTime = (value?: number | string) => {\n        if (value && /^\\d+$/g.test(String(value))) {\n            countdownTimeRef.current = Number(value);\n            setDeadlineText(getCountdownStr(Number(value)));\n        }\n    };\n    const onCountdownFinish = () => {\n        if (timeStartRef.current) {\n            const inputWordArr = typingResultRef.current.inputWordArr;\n            const correctCount = inputWordArr.filter((word: any) => word.isCorrect === true).length;\n            typingResultRef.current = {\n                wpm: Math.round(correctCount / (countdownTimeRef.current / 60)),\n                correct: correctCount,\n                wrong: inputWordArr.filter((word: any) => word.isCorrect === false).length,\n                inputWordArr,\n            };\n            setTypingEnd(true);\n            console.log(wordArr);\n        }\n    };\n    const reloadBtn = useCallback(() => {\n        lineIndexLockRef.current = false;\n        lineCountRef.current = 0;\n        timeStartRef.current = false;\n        keystrokeCountRef.current = 0;\n        setTypingEnd(false);\n        setWordInput('');\n        setActingWordIndex(0);\n        wordsBaseRef.current = wordTool.shuffle(wordsBaseRef.current);\n        pushWordToArr(true);\n        setTimeout(() => {\n            (mainInputEl.current as any).focus();\n            typingResultRef.current = {\n                wpm: 0,\n                correct: 0,\n                wrong: 0,\n                inputWordArr: [] as any[],\n            };\n        }, 10);\n    }, []);\n    const mainInputKeyUp = (evt: React.KeyboardEvent) => {\n        if (evt.keyCode === 13) reloadBtn();\n        if (typingEnd) return;\n        keystrokeCountRef.current += 1;\n    };\n\n    useEffect(() => {\n        if (mainWindowEl) {\n            const wordContainerRow = (mainWindowEl.current as any).lastElementChild;\n            if (!wordContainerRow || !wordContainerRow.lastElementChild) return;\n            const outterScrollTop = (mainWindowEl.current as any).scrollTop;\n            Array.from(wordContainerRow.children).forEach((child: any, index: number) => {\n                oneLineHeightRef.current = child.offsetHeight;\n                const childTopToParent = child.offsetTop - wordContainerRow.offsetTop;\n                const showsSecLine = oneLineHeightRef.current + outterScrollTop;\n                const isNextLineCheck = // 判断是不是显示的两行中的第二行，存在小数公差\n                    showsSecLine - 5 < childTopToParent && childTopToParent < showsSecLine + 5;\n                if (!lineIndexLockRef.current && isNextLineCheck) {\n                    nextLineStartIndexRef.current = index;\n                    lineIndexLockRef.current = true;\n                }\n            });\n            if (\n                wordContainerRow.lastElementChild.offsetTop -\n                    wordContainerRow.offsetTop -\n                    outterScrollTop <\n                oneLineHeightRef.current * 3 + 1\n            ) {\n                pushWordToArr();\n            }\n        }\n    }, [wordArr.length]);\n\n    useEffect(() => {\n        if (typingEnd) return;\n        if (wordInput === '') {\n            setWordArr((arr) => {\n                const tempArr = [...arr];\n                if (tempArr[actingWordIndex]) {\n                    tempArr[actingWordIndex].isCorrect = null;\n                }\n                return tempArr;\n            });\n            return;\n        }\n        if (!timeStartRef.current) countDownStart();\n        timeStartRef.current = true;\n        const inputArr = Array.from(wordInput.trim());\n        if (wordInput[wordInput.length - 1] === ' ') {\n            setWordInput('');\n            if (inputArr.length === 0) return;\n            setWordArr((arr) => {\n                let tempArr = [...arr];\n                const targetWord = tempArr[actingWordIndex];\n                const isCorrect = checkInputVal(inputArr, targetWord.text);\n                tempArr[actingWordIndex].isCorrect =\n                    isCorrect && inputArr.length === targetWord.text.length;\n\n                typingResultRef.current.inputWordArr.push(\n                    Object.assign({ input: inputArr.join('') }, tempArr[actingWordIndex])\n                );\n                return tempArr;\n            });\n            setActingWordIndex(actingWordIndex + 1);\n            if (actingWordIndex + 1 === nextLineStartIndexRef.current) {\n                lineCountRef.current += 1;\n                (mainWindowEl.current as any).scrollTop =\n                    oneLineHeightRef.current * lineCountRef.current;\n                lineIndexLockRef.current = false;\n                pushWordToArr();\n            }\n        } else {\n            setWordArr((arr) => {\n                const tempArr = [...arr];\n                const targetWord = tempArr[actingWordIndex];\n                const isCorrect = checkInputVal(inputArr, targetWord.text);\n                tempArr[actingWordIndex].isCorrect = isCorrect === false ? false : null;\n                return tempArr;\n            });\n        }\n    }, [actingWordIndex, typingEnd, wordInput]);\n\n    useEffect(() => {\n        wordsBaseRef.current = wordTool.getWords(\n            props.$state.root.wordsMode,\n            props.$state.root.customerWords\n        );\n        setTimeout(() => {\n            reloadBtn();\n            setLoading(false);\n        }, 1000);\n    }, [props.$state.root.wordsMode, props.$state.root.customerWords, reloadBtn]);\n\n    return (\n        <div className=\"home\">\n            <Row justify=\"center\" align=\"middle\">\n                <Col flex=\"450px\" className={`home-scale-box-${props.$state.root.uiScale}`}>\n                    <div className=\"hide-control\">\n                        <Button\n                            tabIndex={-1}\n                            type=\"link\"\n                            onClick={() => setIsHideCharacter((v) => !v)}\n                        >\n                            {isHideCharacter ? '显示' : '隐藏'}拼音\n                        </Button>\n                    </div>\n                    <div className=\"home-show-main\">\n                        {typingEnd && <div className=\"type-end\"></div>}\n                        <Spin spinning={loading} delay={50} wrapperClassName=\"loading-wrapper\">\n                            <div className=\"home-show-main-window\" ref={mainWindowEl}>\n                                <Row gutter={12}>\n                                    {wordArr.map((item, index) => (\n                                        <Col\n                                            key={index}\n                                            className={`home-show-main-window-item ${\n                                                item.isCorrect === true ? 'correct' : ''\n                                            } ${item.isCorrect === false ? 'incorrect' : ''}`}\n                                        >\n                                            <div\n                                                className={`home-show-main-window--label ${\n                                                    actingWordIndex === index ? 'acting' : ''\n                                                }`}\n                                            >\n                                                {item.label}\n                                            </div>\n                                            <div\n                                                className={`home-show-main-window--text ${\n                                                    isHideCharacter ? 'hide' : ''\n                                                }`}\n                                            >\n                                                {item.text}\n                                            </div>\n                                        </Col>\n                                    ))}\n                                </Row>\n                            </div>\n                        </Spin>\n                    </div>\n                    <Row justify=\"space-between\" align=\"middle\" gutter={0}>\n                        <Col flex=\"285px\">\n                            <Input\n                                className=\"home-input\"\n                                ref={mainInputEl}\n                                value={wordInput}\n                                onChange={(evt) => {\n                                    setWordInput(evt.target.value);\n                                }}\n                                onKeyUp={mainInputKeyUp}\n                            ></Input>\n                        </Col>\n                        <Col flex=\"90px\">\n                            <Popover\n                                content={\n                                    <div>\n                                        <InputNumber\n                                            defaultValue={countdownTimeRef.current}\n                                            onChange={inputCountdownTime}\n                                        ></InputNumber>\n                                        <span>秒</span>\n                                    </div>\n                                }\n                                onVisibleChange={() =>\n                                    props.$dispatch(\n                                        'setCountdownTime',\n                                        String(countdownTimeRef.current)\n                                    )\n                                }\n                                overlayClassName=\"home-countdown-popover\"\n                                placement=\"bottom\"\n                                title=\"\"\n                                trigger=\"click\"\n                            >\n                                <div className=\"home-countdown\">\n                                    <Countdown\n                                        className=\"home-countdown-main\"\n                                        value={deadline}\n                                        format=\"m:ss\"\n                                        onFinish={onCountdownFinish}\n                                    ></Countdown>\n                                    <div\n                                        className={`home-countdown-placeholder ${\n                                            timeStartRef.current ? 'time-run' : ''\n                                        }`}\n                                    >\n                                        {deadlineText}\n                                    </div>\n                                </div>\n                            </Popover>\n                        </Col>\n                        <Col flex=\"50px\">\n                            <Button\n                                className=\"home-reload-btn\"\n                                onClick={reloadBtn}\n                                type=\"primary\"\n                                icon={<ReloadOutlined />}\n                            />\n                        </Col>\n                    </Row>\n                    <div className=\"home-type-result-container\">\n                        {typingEnd && (\n                            <Row className=\"home-type-result\">\n                                <Col span={24}>\n                                    <div className=\"result-wpm\">\n                                        {typingResultRef.current.wpm}\n                                        WPM\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">正确</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers correct\">\n                                        {typingResultRef.current.correct}\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">错误</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers wrong\">\n                                        {typingResultRef.current.wrong}\n                                    </div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-title\">按键总数</div>\n                                </Col>\n                                <Col span={12}>\n                                    <div className=\"result-numbers\">\n                                        {keystrokeCountRef.current}\n                                    </div>\n                                </Col>\n                                <Col span={24}>\n                                    <Collapse ghost={true} className=\"type-resule-collapse\">\n                                        <Panel header=\"展开此次输入\" key=\"1\">\n                                            {typingResultRef.current.inputWordArr.map((w, wi) => (\n                                                <Tag\n                                                    color={w.isCorrect ? 'success' : 'error'}\n                                                    key={wi}\n                                                >\n                                                    <div>{w.label}</div>\n                                                    <div>{w.input}</div>\n                                                </Tag>\n                                            ))}\n                                        </Panel>\n                                    </Collapse>\n                                </Col>\n                            </Row>\n                        )}\n                    </div>\n                </Col>\n            </Row>\n        </div>\n    );\n};\n\nexport default storeConnect(Fingers);\n"],"sourceRoot":""}